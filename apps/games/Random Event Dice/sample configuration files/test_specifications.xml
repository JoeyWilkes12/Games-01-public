<?xml version="1.0" encoding="UTF-8"?>
<testSpecifications xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <metadata>
        <title>Random Event Dice Test Specifications</title>
        <version>2.0</version>
        <description>XML format test specifications for comprehensive game testing</description>
        <lastUpdated>2026-01-07</lastUpdated>
    </metadata>

    <testSuite name="SeededRNGTests" description="Deterministic random number generation tests">
        <test id="RNG-001" name="DeterministicSequence">
            <seed>12345</seed>
            <diceSides>6</diceSides>
            <expectedValues>
                <roll position="1">3</roll>
                <roll position="2">1</roll>
                <roll position="3">3</roll>
                <roll position="4">2</roll>
                <roll position="5">2</roll>
            </expectedValues>
        </test>
        <test id="RNG-002" name="AlternativeSeedSequence">
            <seed>42</seed>
            <diceSides>6</diceSides>
            <expectedValues>
                <roll position="1">5</roll>
                <roll position="2">2</roll>
                <roll position="3">6</roll>
                <roll position="4">3</roll>
                <roll position="5">1</roll>
            </expectedValues>
        </test>
    </testSuite>

    <testSuite name="EventValidationTests" description="Impossible event detection tests">
        <test id="VAL-001" name="ImpossibleDoubleEquals" expectWarning="true">
            <eventDefinition>
                <rule dieIndex="0" operator="==" value="1"/>
                <rule dieIndex="0" operator="==" value="2"/>
            </eventDefinition>
            <explanation>Same die cannot equal two different values</explanation>
        </test>
        <test id="VAL-002" name="ImpossibleEqualsNotEquals" expectWarning="true">
            <eventDefinition>
                <rule dieIndex="0" operator="==" value="3"/>
                <rule dieIndex="0" operator="!=" value="3"/>
            </eventDefinition>
            <explanation>Die cannot equal and not equal same value</explanation>
        </test>
        <test id="VAL-003" name="ImpossibleRanges" expectWarning="true">
            <eventDefinition>
                <rule dieIndex="0" operator="&gt;" value="5"/>
                <rule dieIndex="0" operator="&lt;" value="4"/>
            </eventDefinition>
            <explanation>No value can be simultaneously greater than 5 and less than 4</explanation>
        </test>
        <test id="VAL-004" name="ValidDoublesEvent" expectWarning="false">
            <eventDefinition>
                <rule dieIndex="0" operator="==" value="1"/>
                <rule dieIndex="1" operator="==" value="1"/>
            </eventDefinition>
            <explanation>Valid event: both dice equal 1</explanation>
        </test>
    </testSuite>

    <testSuite name="GameSimulationTests" description="End-to-end game simulation tests">
        <test id="SIM-001" name="StandardDoublesGame">
            <config>
                <diceCount>2</diceCount>
                <diceSides>6</diceSides>
                <seed>12345</seed>
                <interval>1000</interval>
                <duration>60</duration>
                <players>
                    <player id="1">P1</player>
                    <player id="2">P2</player>
                </players>
            </config>
            <eventDefinitions type="default_doubles"/>
            <rollCount>50</rollCount>
            <expectedEventCount>7</expectedEventCount>
        </test>
        <test id="SIM-002" name="SkipToEndTimeTracking">
            <config>
                <diceCount>2</diceCount>
                <diceSides>6</diceSides>
                <seed>12345</seed>
                <interval>2500</interval>
            </config>
            <poolSize>100</poolSize>
            <assertion type="timeIntegrity">
                <description>Total player time must equal totalRolls Ã— intervalSeconds</description>
            </assertion>
        </test>
    </testSuite>

    <testSuite name="AnalyticsTests" description="Analytics tracking accuracy tests">
        <test id="ANALYTICS-001" name="PlayerRotation">
            <players>
                <player id="1">Alice</player>
                <player id="2">Bob</player>
                <player id="3">Charlie</player>
            </players>
            <startPlayer>1</startPlayer>
            <turnsToSimulate>3</turnsToSimulate>
            <expectedFinalPlayer>1</expectedFinalPlayer>
        </test>
        <test id="ANALYTICS-002" name="LeaderboardSorting">
            <scenario>
                <turn player="1" rolls="2"/>
                <turn player="2" rolls="1"/>
                <turn player="3" rolls="3"/>
            </scenario>
            <expectedOrder>3,1,2</expectedOrder>
        </test>
        <test id="ANALYTICS-003" name="HeatmapAccumulation">
            <rollSequence>
                <roll die1="1" die2="1"/>
                <roll die1="1" die2="1"/>
                <roll die1="6" die2="6"/>
                <roll die1="3" die2="4"/>
            </rollSequence>
            <expectedHeatmap>
                <cell row="0" col="0" count="2"/>
                <cell row="5" col="5" count="1"/>
                <cell row="2" col="3" count="1"/>
            </expectedHeatmap>
        </test>
    </testSuite>

    <configTemplates>
        <template name="default_doubles" description="Standard doubles event configuration">
            <definition id="1">
                <rule dieIndex="0" operator="==" value="1"/>
                <rule dieIndex="1" operator="==" value="1"/>
            </definition>
            <definition id="2">
                <rule dieIndex="0" operator="==" value="2"/>
                <rule dieIndex="1" operator="==" value="2"/>
            </definition>
            <definition id="3">
                <rule dieIndex="0" operator="==" value="3"/>
                <rule dieIndex="1" operator="==" value="3"/>
            </definition>
            <definition id="4">
                <rule dieIndex="0" operator="==" value="4"/>
                <rule dieIndex="1" operator="==" value="4"/>
            </definition>
            <definition id="5">
                <rule dieIndex="0" operator="==" value="5"/>
                <rule dieIndex="1" operator="==" value="5"/>
            </definition>
            <definition id="6">
                <rule dieIndex="0" operator="==" value="6"/>
                <rule dieIndex="1" operator="==" value="6"/>
            </definition>
        </template>
    </configTemplates>
</testSpecifications>
